<h3>Mes parcelles</h3>

<div *ngIf="!userId">Utilisateur non connecté (user_id manquant)</div>

<div *ngIf="userId">
  <button mat-stroked-button color="primary" (click)="load()" [disabled]="loading">Rafraîchir</button>

  <table style="width:100%; margin-top:12px; border-collapse:collapse;">
    <thead>
      <tr>
        <th style="text-align:left; padding:6px; border-bottom:1px solid #ddd;">ID</th>
        <th style="text-align:left; padding:6px; border-bottom:1px solid #ddd;">Nom</th>
        <th style="text-align:left; padding:6px; border-bottom:1px solid #ddd;">Surface</th>
        <th style="text-align:left; padding:6px; border-bottom:1px solid #ddd;">Localisation</th>
        <th style="text-align:left; padding:6px; border-bottom:1px solid #ddd;">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of parcels">
        <td style="padding:6px; border-bottom:1px solid #f0f0f0;">{{p.id}}</td>
        <td style="padding:6px; border-bottom:1px solid #f0f0f0;">{{p.nom || ('Parcelle ' + p.id)}}</td>
        <td style="padding:6px; border-bottom:1px solid #f0f0f0;">{{p.surface ?? '-'}}</td>
        <td style="padding:6px; border-bottom:1px solid #f0f0f0;">{{p.localisation || '-'}}</td>
        <td style="padding:6px; border-bottom:1px solid #f0f0f0;">
          <button mat-stroked-button color="warn" (click)="deleteParcelle(p.id)">Supprimer</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="parcels.length === 0 && !loading" style="margin-top:12px;">
    Aucune parcelle.
  </div>
</div>